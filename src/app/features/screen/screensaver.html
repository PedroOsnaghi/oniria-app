<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Oniria Screensaver</title>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            background: #000;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <canvas id="c"></canvas>
    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        function resize() {
            canvas.width = innerWidth;
            canvas.height = innerHeight;
        }
        addEventListener('resize', resize);
        resize();
        // CONFIGURACIÓN
        const logoSrc = 'Isologotipo.png';
        const logoW = 650;              // ancho del logo
        const logoH = 150;              // alto del logo
        let speed = 5.0;                // velocidad
        const colorOnBounce = true;     // si true cambia el tint del logo al rebotar
        // Estado
        let x = Math.random() * (canvas.width - logoW);
        let y = Math.random() * (canvas.height - logoH);
        let vx = (Math.random() < 0.5 ? -1 : 1) * (speed + Math.random());
        let vy = (Math.random() < 0.5 ? -1 : 1) * (speed + Math.random());
        const img = new Image();
        img.src = logoSrc;
        let tint = null;
        // Helper: aplica un tinte simple dibujando sobre la imagen con globalCompositeOperation
        function drawLogoWithTint(x, y, w, h, tintColor) {
            ctx.drawImage(img, x, y, w, h);
            if (!tintColor) return;
            ctx.fillStyle = tintColor;
            ctx.globalCompositeOperation = 'source-atop';
            ctx.fillRect(x, y, w, h);
            ctx.globalCompositeOperation = 'source-over';
        }
        // Actualizar estado
        function update() {
            x += vx;
            y += vy;
            // movimiento normal
            const delta = (Math.random() - 0.5) * .6;
            // Borde izquierdo
            if (x <= 0) {
                x = 0;
                vx = Math.abs(vx) * (1 + delta * 0.8);
                if (colorOnBounce) tint = randomColor();
            }
            // Borde derecho
            if (x + logoW >= canvas.width) {
                x = canvas.width - logoW;
                vx = -Math.abs(vx) * (1 + delta * 0.8);
                if (colorOnBounce) tint = randomColor();
            }
            // Borde superior
            if (y <= 0) {
                y = 0;
                vy = Math.abs(vy) * (1 + delta * 0.8);
                if (colorOnBounce) tint = randomColor();
            }
            // Borde inferior
            if (y + logoH >= canvas.height) {
                y = canvas.height - logoH;
                vy = -Math.abs(vy) * (1 + delta * 0.8);
                if (colorOnBounce) tint = randomColor();
            }
        }
        // Función auxiliar para generar color aleatorio
        function randomColor() {
            return `hsla(${Math.floor(Math.random() * 360)}, 85%, 60%, 0.7)`;
        }
        function draw() {
            // fondo
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (img.complete) {
                drawLogoWithTint(x, y, logoW, logoH, tint);
            } else {
                // mientras carga la imagen, dibujar un rectángulo
                ctx.fillStyle = '#fff';
                ctx.fillRect(x, y, logoW, logoH);
            }
        }
        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }
        img.onload = loop;
       
      
    </script>
</body>
</html>
